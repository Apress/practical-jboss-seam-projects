<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:s="http://jboss.com/products/seam/taglib"
      xmlns:h="http://java.sun.com/jsf/html">

<head>
    <title>Gadget Catalog: #{title}</title>
    <link href="styles.css" rel="stylesheet" type="text/css"/>
    <div id="head">
        <ui:insert name="head"/>
    </div>
    <script type="text/javascript" src="seam/resource/remoting/resource/remote.js"></script>
    <script type="text/javascript">
        // A handy function for retrieving an object from the DOM,
        // based on a similar function used in the Seam remoting examples.
        //<![CDATA[
        function findObjectById(objectId) {
            if (document.getElementById && document.getElementById(objectId))
                return document.getElementById(objectId);
            else if (document.all && document.all(objectId))
                return document.all(objectId);
            else if (document.layers && document.layers[objectId])
                return document.layers[objectId];
            else
                return null;
        };
        
        function findObjectByName(object, name) {
            if (object && object.getElementsByName && object.getElementsByName(name))
                return object.getElementsByName(name)[0];
            else if (document.getElementsByName && document.getElementsByName(name))
                return document.getElementsByName(name)[0];
            else
                return null;
        };        
        
        function findObjectByTagName(object, name) {
            if (object && object.getElementsByTagName && object.getElementsByTagName(name))
                return object.getElementsByTagName(name)[0];
            else if (document.getElementsByTagName && document.getElementsByTagName(name))
                return document.getElementsByTagName(name)[0];
            else
                return null;
        };
        
        // ]]>
    </script>
</head>

<body>
    <div id="bodyScripts">
        <ui:insert name="bodyScripts"/>
    </div>
    <table border="0" width="100%" class="headerTable">
        <tr>
            <td class="headerCell" colspan="2">
                Gadget Catalog: #{title}          
            </td>
        </tr>
        <tr>
            <td>
                <h:form>
                    <s:link view="/index.seam" propagation="none">
                        <h:outputText value="Home"/>
                    </s:link>
                </h:form>
            </td>
            <td align="right">
                <h:outputLink value="login.seam" 
                              rendered="#{not identity.loggedIn}">Log in</h:outputLink>
                <s:link action="#{identity.logout}" value="Log out" 
                        rendered="#{identity.loggedIn}"/>
            </td>
        </tr>
    </table>

    <div id="messages">
        <h:messages layout="table"
                    infoClass="infoMessage" 
                    errorClass="errorMessage"/>
    </div>
    <div id="main">
        <ui:insert name="main"/>
    </div>
</body>
</html>

