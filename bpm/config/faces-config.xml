<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE faces-config 
    PUBLIC "-//Sun Microsystems, Inc.//DTD JavaServer Faces Config 1.0//EN"
    "http://java.sun.com/dtd/web-facesconfig_1_0.dtd">
    
<faces-config>
    <!-- We're using Seam security, so the Seam facelet handler needs to be
        installed -->
    <application>
        <view-handler>org.jboss.seam.ui.facelet.SeamFaceletViewHandler</view-handler>
    </application>
    <!-- Seam needs to be plugged into the JSF lifecycle by 
         installing its phase listener -->
    <lifecycle>
        <phase-listener>
            org.jboss.seam.jsf.SeamExtendedManagedPersistencePhaseListener
        </phase-listener>
    </lifecycle>
    <!--
    <lifecycle>
        <phase-listener>org.jboss.seam.jsf.SeamPhaseListener</phase-listener>
    </lifecycle>
    -->
    <!-- Example page flow from chapter 5.  To see it in action, start with the
         userHome.jsp home page, and follow the links from there.   -->
    <navigation-rule>
        <from-view-id>/users/userHome.jsp</from-view-id>
        <navigation-case>
            <from-action>#{userAdmin.newUser}</from-action>
            <to-view-id>/users/addUser.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/users/addUser.jsp</from-view-id>
        <navigation-case>
            <from-action>#{userAdmin.saveUser}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/users/userHome.jsp</to-view-id>
            <redirect/>
        </navigation-case>  
        <navigation-case>
            <from-action>#{userAdmin.editRoles}</from-action>
            <to-view-id>/users/editUserRoles.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/users/editUserRoles.jsp</from-view-id>
        <navigation-case>
            <from-action>#{userAdmin.addRole}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/users/addUser.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>

    <!-- Navigation rules for the Gadget Catalog -->    
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.editGadget}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/admin/editGadget.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <!--
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.newGadget}</from-action>
            <to-view-id>/wizard/start.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    -->
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.cancelEditGadget}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/admin/adminHome.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/editGadgetTypes.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetAdmin.doneEdit}</from-action>
            <to-view-id>/admin/editGadget.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/editGadgetFeatures.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetAdmin.doneEdit}</from-action>
            <to-view-id>/admin/editGadget.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/editGadget.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetAdmin.saveGadget}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/admin/adminHome.jsp</to-view-id>
            <redirect/>
        </navigation-case>  
    </navigation-rule>
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.newGadgetType}</from-action>
            <from-outcome>success</from-outcome>
            <to-view-id>/admin/editGadget.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.search}</from-action>
            <from-outcome>listGadgets</from-outcome>
            <to-view-id>/listGadgets.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.pickGadget}</from-action>
            <from-outcome>editGadget</from-outcome>
            <to-view-id>/admin/editGadget.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <navigation-case>
            <from-action>#{gadgetAdmin.listGadgets}</from-action>
            <to-view-id>/listGadgets.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    
    <!-- Navigation rules for the gadget review business process -->
    <navigation-rule>
        <navigation-case>
            <from-outcome>review-core</from-outcome>
            <to-view-id>/admin/reviewGadgetCore.jsp</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>review-types</from-outcome>
            <to-view-id>/admin/reviewGadgetTypes.jsp</to-view-id>
            <redirect/>
        </navigation-case>
        <navigation-case>
            <from-outcome>review-features</from-outcome>
            <to-view-id>/admin/reviewGadgetFeatures.jsp</to-view-id>
            <redirect/>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/admin/reviewGadgetCore.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetReview.saveCoreReviewData}</from-action>
            <to-view-id>/admin/adminHome.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/admin/reviewGadgetTypes.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetReview.saveTypeReviewData}</from-action>
            <to-view-id>/admin/adminHome.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
    <navigation-rule>
        <from-view-id>/admin/reviewGadgetFeatures.jsp</from-view-id>
        <navigation-case>
            <from-action>#{gadgetReview.saveFeatureReviewData}</from-action>
            <to-view-id>/admin/adminHome.jsp</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config>
